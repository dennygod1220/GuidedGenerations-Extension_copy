// ComfyUI ç”Ÿåœ–è…³æœ¬
// æª¢æŸ¥ custom_auto_guide è®Šæ•¸æ˜¯å¦æœ‰å…§å®¹ï¼Œæ²’æœ‰å‰‡å…ˆç”Ÿæˆ

// ç²å–ç•¶å‰è®Šæ•¸å…§å®¹
/getvar key=custom_auto_guide |
/let current_prompt {{pipe}} |

// æª¢æŸ¥æ˜¯å¦ç‚ºç©º
/if left={{var::current_prompt}} rule=empty else=":generate_image" |
    /echo ğŸ”„ Custom Auto Guide è®Šæ•¸ç‚ºç©ºï¼Œæ­£åœ¨ç”Ÿæˆ... |
    /run-persistent-guide customAuto |
    /delay 1000 |
:generate_image |

// ç²å–æœ€æ–°çš„ prompt
/getvar key=custom_auto_guide |
/let final_prompt {{pipe}} |

// æª¢æŸ¥æ˜¯å¦æˆåŠŸç²å–
/if left={{var::final_prompt}} rule=empty else=":call_comfyui" |
    /echo âŒ ç„¡æ³•ç”Ÿæˆ Custom Auto Guideï¼Œè«‹æª¢æŸ¥è¨­å®š |
    /abort |
:call_comfyui |

// å‘¼å« ComfyUI
/echo ğŸ¨ æ­£åœ¨å‘¼å« ComfyUI ç”Ÿæˆåœ–ç‰‡... |
/sd extend=false {{var::final_prompt}} |
/echo âœ… ComfyUI è«‹æ±‚å·²ç™¼é€ï¼ |
